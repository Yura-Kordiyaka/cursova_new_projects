{% extends 'backend/base.html' %}
{% block url_patern %}
    <link rel="stylesheet" href="/static/main/all_categories.css">
{% endblock %}
{% block content %}
    <div class="form-wrapper">
        <form method="get" action="{% url 'all_category' %}">
            {% csrf_token %}
            <label for="sort">Сортувати за</label>
            <select id="sort" name="sort">
                <option value="name" {% if sort_param == 'name' %}selected{% endif %}>Імя</option>
                <option value="date" {% if sort_param == 'date' %}selected{% endif %}>Створенно</option>
                <option value="filter_out" {% if sort_param == 'filter_out' %}selected{% endif %}>Скинути фільтрацію</option>
            </select>
            <button type="submit">Застосувати сортування</button>
        </form>
    </div>
    <div class="main-wrapper">
            {% for category in categories %}
                <div class="category-item">
                    <p class="item-category-paragraph item-category-span">Назва: </p>
                    <a class="item-category-name"
                       href="{% url 'get_product_by_category' pk=category.id %}">{{ category.name }}</a>
                    <p><span class="item-category-span">Дата додавання: </span> {{ category.date_add }}</p>
                    <a class="delete-category" href="{% url 'delete_category' pk=category.id %}"> видалити
                        категорію </a>

                    <form id="edit_form_{{ category.id }}" method="post"
                          action="{% url "edit_category" pk=category.id %}">
                        {% csrf_token %}
                        <input type="text" name="name" value="{{ category.name }}">
                        <button type="submit">Зберегти</button>
                    </form>
                </div>
            {% endfor %}
        <div>
            {% if messages %}
                {% for message in messages %}
                    <li>
                        {{ message }}
                    </li>
                {% endfor %}
            {% endif %}
        </div>
        {% if categories.has_previous %}
            <a class="pagination__link"
               href="{% if sort_param %}{{ request.get_full_path }}&page=
               {{ categories.previous_page_number }}{% else %}?page={{ categories.previous_page_number }}{% endif %}">
                Попередня
            </a>
        {% endif %}
        Сторінка {{ categories.number }} з {{ categories.paginator.num_pages }}
        {% if categories.has_next %}
            <a class="pagination__link"
               href="{% if sort_param %}{{ request.get_full_path }}&page=
                   {{ categories.next_page_number }}{% else %}?page={{ categories.next_page_number }}{% endif %}">
                Наступна

            </a>
        {% endif %}
    </div>
    {#    <form action="{% url 'add_category' %}" method="post">#}
    {#        {% csrf_token %}#}
    {#        <label for="category_name">#}
    {#            Назва категорії#}
    {#        </label>#}
    {#        <input type="text"#}
    {#               id="category_name"#}
    {#               name="category_name"#}
    {#               minlength="3"#}
    {#               placeholder="введіть назву категорії" required>#}
    {#        <div class="wrap">#}
    {#            <button type="submit">#}
    {#                Submit#}
    {#            </button>#}
    {#        </div>#}
    {#    </form>#}


{% endblock %}